WEBVTT
Kind: captions
Language: zh-CN

00:00:00.300 --> 00:00:02.069
正确显示网站所需的

00:00:02.069 --> 00:00:05.250
平均请求数量一直在上升

00:00:05.250 --> 00:00:07.830
最近超过了 100 个

00:00:07.830 --> 00:00:11.609
意味着平均下来 网站需要超过 100 个请求

00:00:11.609 --> 00:00:12.869
才能正确显示

00:00:12.869 --> 00:00:14.879
变得有点夸张

00:00:14.880 --> 00:00:17.280
注意 HTTP/1 无法很好地处理

00:00:17.280 --> 00:00:18.810
大量请求

00:00:18.809 --> 00:00:21.989
幸运的是 出现了 HTTP/2

00:00:21.989 --> 00:00:24.029
我们将了解 HTTP/1 存在的一些问题

00:00:24.030 --> 00:00:27.089
以及 HTTP/2 如何解决了这些问题

00:00:27.089 --> 00:00:29.460
我们有太多请求的原因之一是

00:00:29.460 --> 00:00:31.710
队头阻塞

00:00:31.710 --> 00:00:34.170
我们之前讨论过这个概念

00:00:34.170 --> 00:00:36.329
但是它非常重要 我们再简单回顾下

00:00:36.329 --> 00:00:39.629
队头阻塞是指某个请求

00:00:39.630 --> 00:00:41.280
阻止系统完成其他请求

00:00:41.280 --> 00:00:45.480
浏览器最多会向同一服务器开启六个连接

00:00:45.479 --> 00:00:47.339
意味着最多同时有

00:00:47.340 --> 00:00:49.770
六个请求

00:00:49.770 --> 00:00:52.140
至少应该要等待请求被发送

00:00:52.140 --> 00:00:55.200
然后返回响应

00:00:55.200 --> 00:00:57.910
这两个称为往返过程

00:00:57.909 --> 00:01:02.009
对于好的连接 往返时间可以在

00:01:02.009 --> 00:01:03.719
20 到 50 毫秒之间

00:01:03.719 --> 00:01:05.519
我们来快速演示一个数学流程

00:01:05.519 --> 00:01:08.280
假设一个网站需要发送 100 个请求

00:01:08.280 --> 00:01:10.260
才能完全加载

00:01:10.260 --> 00:01:12.790
我们可以并行处理六个请求

00:01:12.790 --> 00:01:15.480
意味着理想情况下

00:01:15.480 --> 00:01:20.340
每个连接需要发出 17 个请求才能下载所有 100 个请求

00:01:20.340 --> 00:01:22.620
每个请求的平均往返时间

00:01:22.620 --> 00:01:25.260
大概是 35 毫秒

00:01:25.260 --> 00:01:28.530
结果为 525 毫秒

00:01:28.530 --> 00:01:31.710
大约半秒的等待时间

00:01:31.709 --> 00:01:33.539
什么都不能做

00:01:33.540 --> 00:01:36.690
前提是实际传输请求的文件

00:01:36.689 --> 00:01:38.700
不需要任何时间

00:01:38.700 --> 00:01:40.719
如果传输的文件很大

00:01:40.719 --> 00:01:43.109
那么这个数字将变得很大

00:01:43.109 --> 00:01:45.780
这个往返时间是平均值

00:01:45.780 --> 00:01:48.540
如果网络连接不稳定或很慢

00:01:48.540 --> 00:01:50.160
情况会更糟糕

00:01:50.159 --> 00:01:52.469
队头阻塞

00:01:52.469 --> 00:01:54.000
对网站性能来说影响极大

00:01:54.000 --> 00:01:56.219
对于 HTTP/2

00:01:56.219 --> 00:01:58.370
我们不需要担心队头阻塞

