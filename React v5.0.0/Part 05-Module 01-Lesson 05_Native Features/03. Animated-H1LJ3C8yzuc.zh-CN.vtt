WEBVTT
Kind: captions
Language: zh-CN

00:00:00.000 --> 00:00:01.965
我们再进行一些有趣的设置

00:00:01.965 --> 00:00:07.250
在本视频中 我将对这些文本添加一些动画效果

00:00:07.250 --> 00:00:11.780
每当这个文本 也就是方向改变时

00:00:11.779 --> 00:00:16.574
我希望这种改变能有个动画效果 使文本能跳转下

00:00:16.574 --> 00:00:20.899
我们将使用 react-native 的 Animated 库

00:00:20.899 --> 00:00:23.375
首先 向状态中

00:00:23.375 --> 00:00:27.259
添加一个 bounceValue

00:00:27.260 --> 00:00:33.880
将为调用 Animated.Value 的新实例 V 大写 并传入 1

00:00:33.880 --> 00:00:35.945
bounceValue 将从 1 开始

00:00:35.945 --> 00:00:40.890
然后转到下面

00:00:40.890 --> 00:00:43.285
进入 setLocation 中

00:00:43.284 --> 00:00:47.839
这么设置的原因是

00:00:47.840 --> 00:00:51.320
我们想在这里判断我们的朝向是否改变了

00:00:51.320 --> 00:00:56.750
这是旧方向 这是新方向

00:00:56.750 --> 00:01:01.619
如果 newDirection 不等于旧的 direction

00:01:01.619 --> 00:01:04.250
则我们希望对 bounceValue

00:01:04.250 --> 00:01:08.310
设置一个动画效果

00:01:08.310 --> 00:01:11.030
输入 Animated.sequence

00:01:11.030 --> 00:01:14.155
表示我们将实现一系列的动画效果

00:01:14.155 --> 00:01:17.355
传入一个数组

00:01:17.355 --> 00:01:21.825
第一个动画将计时

00:01:21.825 --> 00:01:24.799
因此使用 Animated.timing

00:01:24.799 --> 00:01:28.244
我们想更改的是 bounceValue

00:01:28.245 --> 00:01:32.660
持续时间为 200 毫秒

00:01:32.659 --> 00:01:41.500
我们想从初始值 1 变成 1.04

00:01:41.500 --> 00:01:44.814
听起来很小 但是很快就会看到实际效果的

00:01:44.814 --> 00:01:48.980
上述动画完成后

00:01:48.980 --> 00:01:53.935
我们希望对 bounceValue 再次设置跳转动画效果

00:01:53.935 --> 00:02:01.605
现在我们希望回到值 1 friction 为 4

00:02:01.605 --> 00:02:02.719
发生的过程是

00:02:02.719 --> 00:02:05.359
bounceValue 从 1 开始

00:02:05.359 --> 00:02:07.429
当位置改变时

00:02:07.430 --> 00:02:10.444
从 1 开始 

00:02:10.444 --> 00:02:13.359
计时 200 毫秒后 变成 1.04

00:02:13.360 --> 00:02:17.870
然后使用 spring 属性回到 1

00:02:17.870 --> 00:02:20.420
务必要记住的是

00:02:20.419 --> 00:02:24.209
对于动画 始终需要调用 .start

00:02:24.210 --> 00:02:28.655
现在看看应用效果…

00:02:28.655 --> 00:02:35.240
bounceValue 未定义 因为我们需要在这里输入 bounceValue

00:02:35.240 --> 00:02:38.300
暂时不会看到任何动画效果

00:02:38.300 --> 00:02:42.260
因为我们尚未将此 bounceValue 关联到我们的 UI

00:02:42.259 --> 00:02:45.679
转到下面的

00:02:45.680 --> 00:02:49.280
render 组件中 我们将...

00:02:49.280 --> 00:02:52.479
跑哪去了？在这

00:02:52.479 --> 00:02:56.409
我们将这里的 Text

00:02:56.409 --> 00:03:00.819
改为 Animated.Text

00:03:00.819 --> 00:03:03.965
将这个挪到下一行

00:03:03.965 --> 00:03:07.150
现在 我们要做的是...

00:03:07.150 --> 00:03:11.004
它本来具有 styles.direction

00:03:11.004 --> 00:03:14.444
我们还希望添加 transform

00:03:14.444 --> 00:03:18.094
看起来是这样的 我们将输入 transform:

00:03:18.094 --> 00:03:24.030
传入一个数组 对 bounceValue 进行缩放

00:03:24.030 --> 00:03:27.939
现在 当 bounceValue 改变时

00:03:27.939 --> 00:03:32.764
将缩放和转换这一文本

00:03:32.764 --> 00:03:35.194
看起来不错

00:03:35.194 --> 00:03:36.599
差不多设置完毕了

00:03:36.599 --> 00:03:43.060
需要快速转到这里 从 this.state 上获取 bounceValue

00:03:43.060 --> 00:03:46.805
看起来不错 我们测试下代码

00:03:46.805 --> 00:03:48.110
转到这个界面

00:03:48.110 --> 00:03:52.600
立即从 West 变成了 North West 并出现了一个动画效果

00:03:52.599 --> 00:03:54.159
再等几秒

00:03:54.159 --> 00:03:57.009
希望能再次改变方向

00:03:57.009 --> 00:04:01.024
因为我们在高速公路上以 75 英里/小时的速度前进

00:04:01.025 --> 00:04:03.810
方向改变了 变成了 West

00:04:03.810 --> 00:04:06.969
你会发现比较细微的动画变化效果

